11.3 软件架构反模式
===

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;软件架构是整个系统架构的重要组成部分。虽然系统架构需要侧重于诸如设计、工具和硬件等方面，但软件架构则侧重于软件建模，以便于开发和测试团队、产品经理和其他利益相关者充分理解系统。这个架构在软件的实现能否成功以及确定产品的工作方式方面发挥了关键作用。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们将讨论在开发和实现软件架构过程中实际观察到的一些架构级反模式。

> ## 11.3.1　重新发明轮子

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们经常听到技术领袖说“不要重新发明轮子”。那么，这句话到底是什么意思？ 对于一些人来说，这可能意味着代码或库的重用。但是实际上，它指的是架构的重用。例如，你已经解决了一个问题，并提出了一个架构级的解决方案。如果你在其他应用程序中遇到了类似的问题，那么就可以重用在此前开发过程中所形成的思维流程（即架构或设计）。重新审视相同的问题并为它重新设计解决方案并没有什么意义，这基本上就是重新发明轮子。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;导致重新发明轮子的原因如下：
* 缺乏中央文档或存储库来讲解架构级问题和存放已实现的解决方案；
* 社区或公司内的技术领袖之间缺乏沟通；
* 组织中遵循的流程是从头开始构建的，通常情况下，这样的流程是不成熟的，并且流程的实现通常是不严谨的，并且很难坚持。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这种反模式的后果如下所示：
* 解决一个标准问题的解决方案太多，其中许多解决方案考虑得并不周全；
* 会耗费工程团队更多的时间和资源，导致预算超标，上市时间延后；
* 封闭的系统架构（仅适用于一种产品的架构）、重复劳动和糟糕的风险管理。

> ## 11.3.2　供应商套牢

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;正如这种反模式的名称所示，产品公司往往依赖于供应商提供的某些技术。这些技术对于他们的系统来说如此密不可分，以至于系统很难摆脱这些技术。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以下是导致供应商锁定的原因：
* 熟悉供应商公司的权威人士以及技术采购的可能折扣；
* 基于营销和销售业务而不是技术评估选择的技术；
* 在当前项目中使用经过验证的技术（验证表明，使用此技术的投资回报率非常高），即使它不适合当前项目的需要或要求；
* 技术人员/开发人员已经接受过相关技术的培训。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;供应商锁定的后果如下所示：

* 公司产品的发布周期和维护周期直接取决于供应商的发布时间；
* 该产品是围绕该技术而不是根据客户的要求开发的；
* 产品上市时间不可靠，不能满足客户的期望。

> ## 11.3.3　委员会设计

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;有时，根据组织中的流程，一群人会坐在一起来设计特定的系统，所得到的软件架构通常是复杂的或不合格的。因为这涉及太多的思维过程，并且这些设计思想可能是由没有相应的技能或相应产品设计经验的技术专家所提出的。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;委员会设计的原因如下：
* 根据组织的流程，产品的架构或设计是由众多的利益相关者批准的；
* 没有指定单独的联系人或负责设计的架构师；
* 由营销或技术专家确定设计优先级，而不是由客户反馈来确定。

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;与该模式有关的症状如下所示：

* 开发人员和架构师之间的观点冲突，即使在设计完成后依旧如此；
* 过于复杂的设计，很难记录；
* 规格或设计的任何改动都需要经过多次审查，导致实现延迟。
