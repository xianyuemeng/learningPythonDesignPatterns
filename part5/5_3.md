5.3 了解不同类型的代理
===

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在许多常见的情形中，都会用到代理。在本章的开头部分，我们已经对部分情形进行了讨论。根据代理的使用方式，我们可以将它们分为虚拟代理、远程代理、保护代理和智能代理。在本小节中，我们将会更加深入的讨论。

> ### 5.3.1 虚拟代理

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在这里，你将详细了解虚拟代理。如果一个对象实例化后会占用大量内存的话，可以先利用占位符来表示，这就是所谓的虚拟代理。例如，假设你想在网站上创建一个占位符图标，以提示这里有图像。但是，只有当用户实际点击图标时才会加载图像，从而节省了向存储器中加载大型图像的开销。因此，在虚拟代理中，当客户端请求或访问对象时，才会创建实际对象。

> ### 5.3.2 远程代理

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;远程代理可表述如下：他给位于远程服务器或不同地址空间上的实际对象提供了一个本地表示。例如，你希望为应用程序建立一个监控系统，而该应用设计多个Web服务器、数据库服务器、`celery`（一种消息队列）任务服务器、缓存服务器，等等。如果我们要监视这些服务器的CPU和磁盘利用率，就需要建立一个对象，该对象能够用于监视应用程序运行的上下文中，同时还可以执行远程命令以获取实际的参数值。在这种情况下。建立一个作为远程对象的本地表示的远程代理对象将可以帮助我们实现这个目标。

> ### 5.3.3 保护代理

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;你可以通过以下几点加深对保护代理的解释。这种代理能够控制 `RealSubject`
的敏感对象的访问。例如，在当今分布式系统的世界中，Web应用会提供多个服务,这些服务相互协作来提供各种功能。现在，再这样的系统中，认证服务充当负责认证和授权的保护性代理服务器。在这种情况下，代理自然有助于保护网站的核心功能，防止无法识别或未授权的代理访问他们。因此，代理对象会检查调用者是否具有转发请求所需的访问权限。


> ### 5.3.4 智能代理

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;智能代理在访问对象时插入其他操作。例如，假设在系统有一个核心组件，它将状态信息集中保存在一个地点。通常情况下，这样的组件需要被多个不同的服务调用已完成他们的任务，并且可能导致共享资源的问题。与让服务直接调用核心组件不同，只能代理是内置的，并且会在访问之前检查实际对象是否被锁定，以确保没有其他对象可以更改它。
